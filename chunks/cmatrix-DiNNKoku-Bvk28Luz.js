import{E as x,P as m,F as z,D as S,a as w,O as d,A as p}from"../index.js";const g=1.25,l=75,f=20,E="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.*\\/()#@&$!?%Â°:<>[]",c={framesBetweenSpawn:30,fallSpeed:1,minSize:5,maxSize:25};function h(i,r,o){if(i%c.framesBetweenSpawn){const e={position:new z(S(0,l),f).round(),size:Math.round(S(c.minSize,c.maxSize))};o.push(e)}return o.forEach(e=>{e.position.y-=c.fallSpeed;for(let t=0;t<c.fallSpeed;t++){const s=e.position.x,n=e.position.y+t+e.size;n<f&&n>=0&&(r[n][s]=" ")}if(e.position.y+e.size<=0||e.position.x>=l)return w(e,o);for(let t=0;t<e.size;t++){const s=d(E.split(""));let n=t==0?p.fg.white:p.fg.green;t>e.size/2&&(n=p.fg.green+p.decoration.dim);const a=e.position.x,u=e.position.y+t;a<l&&u<f&&u>=0&&(r[u][a]=n+s+p.reset)}}),[...r.map(e=>e.join(""))].reverse().join(`
`)}const A=new x().setManual({purpose:"Show a scrolling 'Matrix' like screen",usage:"cmatrix"}).setExecute(function(){const i=new m,r=[],o=[];for(let s=0;s<f;s++){const n=[];for(let a=0;a<l;a++)n.push(" ");o.push(n)}let e=0;const t=setInterval(()=>{const s=h(e,o,r);i.send(s),e++},100/g);return i.on(m.EVENT_NAMES.stop,()=>{clearInterval(t)}),i.start(),i});export{A as cmatrix};
