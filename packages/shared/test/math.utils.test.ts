import { test as base } from "vitest";
import { extend } from "@prozilla-os/dev-tools";
import { clamp, round } from "../src/features";

const test = extend(base);

test.cases(clamp, [
	[[0, 0, 1], 0],
	[[1, 0, 1], 1],
	[[0.5, 0, 1], 0.5],
	[[-1, 0, 1], 0],
	[[2, 0, 1], 1],
	[[0, 0, 0], 0],
	[[-1, -1, 0], -1],
	[[-0.5, -1, 0], -0.5],
	[[0, -1, 0], 0],
	[[-2, -1, 0], -1],
	[[1, -1, 0], 0],
]);

test.cases(round, [
	[[1], 1],
	[[1, 1], 1],
	[[1, 2], 1],
	[[1, 3], 1],
	[[1.2345], 1],
	[[1.2345, 1], 1.2],
	[[1.2345, 2], 1.23],
	[[1.2345, 3], 1.235],
	[[1.2345, 4], 1.2345],
	[[1.2345, 5], 1.2345],
	[[0.5], 1],
	[[0.4999], 0],
	[[14.9999, -1], 10],
	[[15, -1], 20],
	[[149.99, -2], 100],
	[[150, -2], 200],
]);